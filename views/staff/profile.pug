extends ./layout.pug
block content
	main.col-md-9.ms-sm-auto.col-lg-10.px-md-4
		.d-flex.justify-content-between.flex-wrap.flex-md-nowrap.align-items-center.pt-3.pb-2.mb-3.border-bottom.flex-column.flex-lg-row
			h1.h3.mb-0= title
			.btn-toolbar.mt-2.mb-mt-0
		nav
			#nav-tab.nav.nav-tabs(role='tablist')
				button#nav-profile-tab.nav-link.text-secondary(data-bs-toggle='tab' data-bs-target='#nav-profile' type='button' role='tab' aria-controls='nav-profile' aria-selected='true') Thông tin cá nhân
				button#nav-changepassword-tab.nav-link.text-secondary(data-bs-toggle='tab' data-bs-target='#nav-changepassword' type='button' role='tab' aria-controls='nav-changepassword' aria-selected='false') Đổi mật khẩu
			#nav-tabContent.tab-content
				#nav-profile.tab-pane.fade.p-3(role='tabpanel' aria-labelledby='nav-profile-tab')
					form.needs-validation(method="post" action="/profile/update" enctype="multipart/form-data" novalidate)
						.d-flex.flex-lg-row.flex-column.w-100.m-auto(style="max-width:800px")
							.flex-fill.w-100.position-relative
								label#simg-preview.img-box.w-100.align-middle(for="sImg" style=`height:${imgPreviewSize-1}px`).d-flex.justify-content-center.align-items-center
									input#sImg.btn.btn-success(type="file" name="sImg" accept="image/png, image/jpeg")
									.title.h-100.d-flex.justify-content-center.align-items-center.d-none
										span(data-feather="upload")
										span.ms-2 Chọn ảnh
									img#img-preview(src=`img/users/${profile.sImg}` style="max-width:398px;" height=`${imgPreviewSize}px`)
								span.file_remove(data-feather="x")
								.text-danger.mb-3.d-none(role="errMessage")
									span
							.flex-fill.w-100
								.form.pe-0.ps-lg-3.pt-3.pt-lg-0
									.my-2.fs-6 Tên tài khoản: 
										b= sess.aUsername
									.my-2.fs-6 Thời gian vào làm: 
										b= profile.sJoinAt
									.my-2.fs-6 Quyền: 
										b= profile.aId.rId.rName
									.form-label-group
										input#sName.form-control(name="sName" type="text" placeholder="Họ tên" value= profile.sName maxlength="50")
										label(for="sName") Họ tên
									.form-label-group
										input#sDofB.form-control(name="sDofB" type="date" value= profile.sDofB)
										label(for="sDofB") Ngày sinh
									.form-label-group
										input#sNumber.form-control(name="sNumber" type="text" placeholder="Số điện thoại" value= profile.sNumber maxlength="10")
										label(for="sNumber") Số điện thoại
									.form-label-group
										input#sEmail.form-control(name="sEmail" type="email" placeholder="Email" value= profile.sEmail maxlength="50")
										label(for="sEmail") Email
										.invalid-feedback Email không hợp lệ
						.d-grid.m-auto(style="max-width:800px")
							button.btn.btn-block.btn-primary(type="submit") Cập nhật
				#nav-changepassword.tab-pane.fade.p-3(role='tabpanel' aria-labelledby='nav-changepassword-tab')
					form.needs-validation(method="post" action="/profile/change-password" novalidate)
						.d-grid.m-auto(style="max-width:400px")
							.form-label-group
								input#newPassword.form-control(name="newPassword" type="password" placeholder="Mật khẩu mới" autocomplete="off" minlength="6" maxlength="50" required)
								label(for="newPassword") Mật khẩu mới
								.invalid-feedback Mật khẩu phải có ít nhất 6 kí tự
							.form-label-group
								input#newPassword2.form-control(name="newPassword2" type="password" placeholder="Nhập lại mật khẩu mới" autocomplete="off" maxlength="50" required)
								label(for="newPassword2") Nhập lại mật khẩu mới
								.invalid-feedback Mật khẩu mới không khớp
							.form-label-group
								input#oldPassword.form-control(name="oldPassword" type="password" placeholder="Xác nhận bằng mật khẩu cũ" autocomplete="off" maxlength="50" required)
								label(for="oldPassword") Xác nhận bằng mật khẩu cũ
								.invalid-feedback Mật khẩu cũ không được để trống
						.d-grid.gap-2.m-auto(style="max-width:400px")
							button.btn.btn-block.btn-primary(type="submit") Cập nhật



